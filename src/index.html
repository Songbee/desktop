<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Songbee desktop</title>
    <link rel="stylesheet" href="../node_modules/photon/dist/css/photon.css" media="screen">
    <style>
      .window {
        height: 100%;
      }

      .toolbar-form-control {
        height: 24px;
        max-width: 300px;
        min-height: 24px;
      }
    </style>
    <script type="text/javascript">
      function viewComponentTree(node) {
        let doc = new DOMParser().parseFromString('', 'application/xml');
        function visitor(dom) {
          let el, c;
          if (dom instanceof Node) {
            el = dom.cloneNode();
            for (let i=0; i<dom.childNodes.length; i++) {
              let c = dom.childNodes[i];
              el.appendChild(visitor(c._component || c));
            }
          }
          else {
            el = doc.createElement(getName(dom.constructor));
            for (let i in dom.props) if (i!=='children' && dom.props[i]!==undefined) {
              el.setAttribute(i, stringify(dom.props[i]));
            }
            el.appendChild(visitor(dom._component || dom.base));
          }
          return el;
        }
        function getName(component) {
          return component.displayName || component.name || 'UnnamedComponent';
        }
        function stringify(value) {
          if (value && typeof value==='object') {
            if (value.join) return '[ '+value.map(stringify).join(', ')+' ]';
            if ('nodeName' in value && 'attributes' in value && 'children' in value) {
              return '<'+(typeof value.nodeName==='function'?getName(value.nodeName):value.nodeName)+' '+Object.keys(value.attributes||{}).map(k=>k+'="'+stringify(value.attributes[k])+'"')+' />';
            }
            let r = '{';
            for (let i in value) {
              r += (r[1]?', ':' ') + (typeof value[i]==='function'?'':(i+': ')) + stringify(value[i]);
            }
            value = (r.length>60?(r.substring(0,58)+'â€¦'):r) + ' }';
          }
          if (typeof value==='function') value = (value.name || 'fn')+'()';
          return String(value);
        }
        doc.removeChild(doc.firstChild);
        doc.appendChild(visitor(node));
        return doc.firstChild;
      }
    </script>
  </head>
  <body></body>

  <script>
    require("./app.js");
  </script>
</html>
